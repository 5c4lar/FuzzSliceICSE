# FuzzSlice

This is a fuzzing based tool that attempts to eliminate false positives in static analysis reports in a rapid manner. It works by generating a minimised slice for a target vulnerability. This is followed by fuzzing to try and get the instrumented binary of the minimised snippet to crash.

## Getting Started

These instructions will get you a copy of the tool up and running on your local machine.

### Prerequisites

- Docker

### Building docker image

First clone this repo, and enter the root directory of the project. Recursively fetch the submodules by running:
```bash
git submodule update --init --recursive
```

You can now build the environment required for the tool from using the Dockerfile included by running the following command:
```bash
docker build -t sf . 
```

**Note**: If you are building on a system using the arm architecture like the Mac Mseries, to prevent srcML from failing to install specify the platform as `x86_64`:
```bash
docker build --platform linux/x86_64 -t sf . 
```

### Launching docker image with tool

The build command will both setup the environment and the 3 test repositories. To enter the container invoke:
```bash
docker run -it sf
```

### Running the tool on a custom repo

Now you can clone and setup target repo in testlib. After setting up the repo such that `make` can be run on it. 

The tool also expects a list of targets to work with, though all targets produced from a static analyzer can be used here we have kept this part manual so that the tool is only run on the kind of issues the user wants to check for (say buffer or memory issues). This file should be provided as `infolib/{test_library}/targets.txt`. Each target line should start with `{relative_path}:{line_no}`, this format is used by default in reports generated by tools like `rats` and `infer`. 

You can run the tool on the repo by updating the `config.yaml` file as per your requirements and running the `main.py` script.

The config keys currently supported are detailed below:

```yaml
test_library: Name of the directory within test_lib which has been setup for testing
fuzz_tool: Use 0 for libfuzzer and 1 for AFL [AFL support has currently been paused please retain this as 0]
timeout: The time for which Fuzzer runs
hard_timeout: Max timeout enforced for the entire fuzzing binaries function [For cases that don't terminate as expected]
max_length_fuzz_bytes: Max length of fuzz bytes
parallel_execution: Allow multiprocessing for issues
crash_limit: Maximum number of crashes to check
bug_timeline_targets_run: Performs git blame based tracing of issues [Retain as false for analysis]
log_report: Enable timing each part of the pipeline
```
